layui.define(["jquery","laytpl","layer","jqelem","tabmenu"],function(e){var o=layui.jquery,s=layui.laytpl,l=layui.jqelem,d=layui.layer,m=!0,n=!1,u=layui.tabmenu(),i=function(){this.options={showIcon:!0}};function t(){var e=o(".menu-type").find("i").removeClass("iconfont").addClass("layui-icon");oHtml=document.documentElement,leftSub=o("#submenu").find("ul li");var i=oHtml.clientWidth;i<750?(o(".jqadmin-main-menu").hide(),o("body").addClass("left-miss left-off minWidth"),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),o("#submenu").find("ul li").find("a").off("mouseenter"),o(".layui-header .header-right .right-menu").hide()):n=(i<970?(o(".layui-nav-itemed").removeClass("layui-nav-itemed"),o(".jqadmin-main-menu").show(),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").hide(),o(".layui-header .header-right .right-menu").show(),o("body").removeClass("left-miss minWidth"),o("body").addClass("left-off"),o("#submenu").find("ul li").children("a").each(function(){o(this).addClass("nav-collapse")}),o("#submenu").find("ul li").find("a").on("mouseenter",function(){o(this).siblings("dl").length<0?d.tips(o(this).data("title"),o(this)):d.closeAll("tips")}),o("#submenu").find("ul li").find("a").on("mouseleave",function(){d.closeAll("tips")}),e.html("&#xe66b;")):(o(".jqadmin-main-menu").show(),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),o(".layui-header .header-right .right-menu").show(),o("body").removeClass("left-off minWidth left-miss"),o("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),e.html("&#xe668;")),o(".jqadmin-main-menu .cloneDom").remove(),!1),o("body").hasClass("left-off")?leftSub.on("mouseenter",function(){0<o(this).find("dl").length?(o(this).addClass("layui-nav-itemed"),d.closeAll("tips")):d.tips(o(this).children("a").data("title"),o(this))}).on("mouseleave",function(){d.closeAll("tips"),o(this).removeClass("layui-nav-itemed")}):leftSub.off("mouseenter").off("mouseleave")}i.prototype.init=function(){var e=this;e.resize(),e.menuBind(),e.openOldMenu(),l.init(),0<o("iframe[data-id=0]").length&&o("iframe[data-id=0]").attr("src",o("[lay-id=0]").find("em").data("href")),o(".layui-tab-content").append('<div class="coverBox"></div>')},i.prototype.tabmenu=u,window.jqTabmenu=u,i.prototype.resize=function(){o(window).on("resize",function(){u.init(),u.tabMove(0,1)}).resize()},i.prototype.menuBind=function(){var i=this,e=o("#menu"),n=o("#submenu").find("ul li");e.find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this),{tips:3})}).on("mouseleave",function(){d.closeAll("tips")}),o("body").hasClass("left-off")?n.on("mouseenter",function(){0<o(this).find("dl").length?(o(this).addClass("layui-nav-itemed"),d.closeAll("tips")):d.tips(o(this).children("a").data("title"),o(this))}).on("mouseleave",function(){d.closeAll("tips"),o(this).removeClass("layui-nav-itemed")}):n.off("mouseenter").off("mouseleave"),o(".layui-tab-content").on("click",".coverBox",function(){o(this).hide(),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),o(".menu-list").slideUp("fast"),o(".jqadmin-auxiliary-btn").removeClass("xz"),o(".minWidth .jqadmin-main-menu").slideUp(),o(".left-off .layui-nav-itemed").removeClass("layui-nav-itemed"),o("#submenu").find("ul li").find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this))}),o("#submenu").find("ul li").find("a").on("mouseleave",function(){d.closeAll("tips")})}),o(".sub-menu .layui-nav-item,.tab-menu,.menu-list li").bind("click",function(){var e=o(this);e.siblings("li").removeClass("layui-nav-itemed"),d.closeAll("tips"),o(".menu-list").slideUp(),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),e.find("dl").length<=0?i.menuSetOption(e):e.hasClass("layui-nav-itemed")?e.find("a").off("mouseenter").removeClass("nav-collapse"):(o(".coverBox").hide(),e.find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this))}),e.find("a").on("mouseleave",function(){d.closeAll("tips")}))}).find("dd").bind("click",function(){i.menuSetOption(o(this))}),l.on("nav(main-menu)",function(e){o(".left-off .jqamdin-left-bar .layui-nav-itemed").removeClass("layui-nav-itemed");var i=e.index();if(-1==e[0].className.indexOf("tab-menu")){var n=o("#submenu .sub-menu").eq(i);(window.sessionStorage||{}).menuId=n.find("ul").data("formenu"),n.is(":visible")||(o("#submenu .sub-menu").hide(),n.show())}}),o(".tab-move-btn").bind("click",function(){var e=o(".menu-list").css("display");o(".jqadmin-auxiliary-btn").removeClass("xz"),o(".minWidth .jqadmin-main-menu").slideUp(),"none"==e?(o(this).addClass("open"),o(".coverBox").show(),o(".coverBox").show(),i.menulist(),o(".menu-list li").bind("click",function(){i.menuSetOption(o(this))}),o(".menu-list").slideDown("fast"),o(this).find("i").html("&#xe603;")):(o(this).removeClass("open"),o(".coverBox").hide(),o(".menu-list").slideUp("fast"),o(this).find("i").html("&#xe604;"))}),o("span.move-left-btn,span.move-right-btn").bind("selectstart",function(){return!1})},i.prototype.menuSetOption=function(e){var i=e.children("a"),n=i.data("url"),t=i.children("i:first").data("icon")||"&#xe621;",a=i.data("title"),s={href:n,icon:t,cls:i.children("i:first").get(0).className,title:a};this.menuOpen(s)},i.prototype.menuOpen=function(e,i){u.tabAdd(e,this.options.fresh,i)},i.prototype.openOldMenu=function(){var t=window.sessionStorage||{},e=0,a=this;if(l.on("tab(tabmenu)",function(e){var i=o(this).attr("lay-id");o(".menu-list").slideUp(),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;");var n={layId:i};!m&&i&&u.storage(n,"change"),e&&e.this&&(t.cTabIdx=o(e.this).attr("lay-id"),t.cTabIdx&&a.sw(o(e.this)))}),t.menu){var i,n=t.menu;for(index in n=n.split("<-!->"))"remove"!=index&&("string"==typeof n[index]&&(i=JSON.parse(n[index])),i&&(i.nodo=!0,t.cTabIdx==i.layId?(this.menuOpen(i,!0),e++):this.menuOpen(i,!1)))}0===e&&this.sw(!1),m=!1},i.prototype.sw=function(e){var i,n=window.sessionStorage||{};if(e){var t=e.find("em").data("href");if(t){var a=o("#submenu").find('a[data-url="'+t+'"]');if(0<a.length){o(".left-off .layui-nav-itemed").removeClass("layui-nav-itemed");var s=a.closest("ul.layui-nav");s.find(".layui-this").removeClass("layui-this");var l=a.parent();l.addClass("layui-this"),l.is("dd"),i=s.data("formenu")}}}else i=n.menuId;i?o("#"+i).click():n.menuId?o("#"+n.menuId).click():o("#menu li:first").click()},i.prototype.menulist=function(){if(e=(window.sessionStorage||{}).menu){var e=e.split("<-!->"),i=[],n={};for(index in e)if("remove"!=index){if("string"==typeof e[index])var t=JSON.parse(e[index]);i.push(t)}if(n.list=i,""!=n||null!=n){var a=o("#menu-list-tpl").html();s(a).render(n,function(e){o("#menu-list").html(e)})}}},i.prototype.menuShowType=function(e){var i=document.documentElement.clientWidth,n=0;("close"==e&&(n=1),"open"!=e&&"close"!=e&&window.localStorage)&&(n=window.localStorage.getItem("showType"),n=o("body").hasClass("left-off")?0:1);var t=o(".menu-type").find("i");switch(parseInt(n)){case 1:o(".layui-nav-tree .layui-nav-item").removeClass("layui-nav-itemed");var a=o("#submenu").find("ul li");a.children("a").each(function(){o(this).addClass("nav-collapse")}),o("body").addClass("left-off").removeClass("left-miss"),a.on("mouseenter",function(){0<o(this).find("dl").length?(o(this).addClass("layui-nav-itemed"),d.closeAll("tips")):d.tips(o(this).children("a").data("title"),o(this))}).on("mouseleave",function(){d.closeAll("tips"),o(this).removeClass("layui-nav-itemed")}),this.options.showIcon||o("#submenu").find("i").removeClass("hide-icon"),t.html("&#xe66b;");break;default:o("#submenu").find("ul li").off("mouseenter").off("mouseleave"),o("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),o("body").removeClass("left-off"),i<750&&o("body").removeClass("left-miss"),t.html("&#xe668;")}},(window.onresize=t)(),o(".minWidth li.first").click(function(){o(".minWidth #menu .head-nav-item").removeClass("layui-this"),o("#menu li.first dl").removeClass("layui-show"),o(this).siblings(".first").find("dl").hide(),o(this).find("span").toggleClass("layui-nav-mored"),o(this).find("dl").toggle()}),o(".jqadmin-auxiliary-btn").click(function(){if(o(this).toggleClass("xz"),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),o(".menu-list").slideUp("fast"),o(".coverBox").show(),!n){var e=o(".minWidth .layui-header .header-right .right-menu li").clone(!0);o(".minWidth .layui-header .header-right .right-menu").hide(),e.appendTo("#menu")}o(".minWidth .jqadmin-main-menu").slideToggle(),n=!0}),o(".minWidth .first dd").click(function(){o(".minWidth .jqadmin-main-menu").slideUp()}),o(".minWidth .head-nav-item").click(function(){o(".minWidth .jqadmin-main-menu").slideUp(),top.global.menu.menuShowType("open")}),o(".minWidth .tab-menu").unbind("click").click(function(){o(".minWidth .jqadmin-main-menu").slideUp()}),e("jqmenu",i)});