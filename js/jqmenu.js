layui.define(["jquery","laytpl","layer","jqelem","tabmenu"],function(e){var i=layui.jquery,n=layui.laytpl,t=layui.jqelem,a=layui.layer,s=!0,l=!1,o=layui.tabmenu(),m=function(){this.options={showIcon:!0}};function d(){var e=i(".menu-type").find("i"),n=document.documentElement.clientWidth;n<750?(i(".jqadmin-main-menu").hide(),i("body").addClass("left-miss left-off minWidth"),i(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),i("#submenu").find("ul li").find("a").off("mouseenter"),i(".layui-header .header-right .right-menu").hide()):n<970?(i(".jqadmin-main-menu").show(),i(".jqadmin-main-menu .layui-nav .layui-nav-item a span").hide(),i(".layui-header .header-right .right-menu").show(),i("body").removeClass("left-miss minWidth"),i("body").addClass("left-off"),i("#submenu").find("ul li").children("a").each(function(){i(this).addClass("nav-collapse")}),i("#submenu").find("ul li").find("a").on("mouseenter",function(){a.tips(i(this).data("title"),i(this))}),i("#submenu").find("ul li").find("a").on("mouseleave",function(){a.closeAll("tips")}),e.html("&#xe683;"),i(".jqadmin-main-menu .cloneDom").remove(),l=!1):(i(".jqadmin-main-menu").show(),i(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),i(".layui-header .header-right .right-menu").show(),i("body").removeClass("left-off minWidth left-miss"),i("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),e.html("&#xe61a;"),i(".jqadmin-main-menu .cloneDom").remove(),l=!1)}m.prototype.init=function(){var e=this;e.openOldMenu(),e.resize(),e.menuBind(),t.init(),o.effect(0),i("iframe[data-id=0]").length>0&&i("iframe[data-id=0]").attr("src",i("[lay-id=0]").find("em").data("href"))},m.prototype.tabmenu=o,window.jqTabmenu=o,m.prototype.resize=function(){i(window).on("resize",function(){o.init(),o.tabMove(0,1)}).resize()},m.prototype.menuBind=function(){var e=this,n=i("#menu");i(".sub-menu").eq(0).slideDown(),n.find("li").removeClass("layui-this").eq(0).addClass("layui-this"),n.find("a").on("mouseenter",function(){a.tips(i(this).data("title"),i(this),{tips:3})}).on("mouseleave",function(){a.closeAll("tips")}),i(".sub-menu .layui-nav-item,.tab-menu,.menu-list li").bind("click",function(){var n=i(this);i(".menu-list").slideUp(),i(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),n.find("dl").length<=0&&e.menuSetOption(n)}).find("dd").bind("click",function(){e.menuSetOption(i(this))}),t.on("nav(main-menu)",function(e){var n=e.index();-1==e[0].className.indexOf("tab-menu")&&i(".sub-menu").slideUp().eq(n).slideDown()}),i(".tab-move-btn").bind("click",function(){"none"==i(".menu-list").css("display")?(i(this).addClass("open"),e.menulist(),i(".menu-list li").bind("click",function(){e.menuSetOption(i(this))}),i(".menu-list").slideDown("fast"),i(this).find("i").html("&#xe603;")):(i(this).removeClass("open"),i(".menu-list").slideUp("fast"),i(this).find("i").html("&#xe604;"))}),i("span.move-left-btn,span.move-right-btn").bind("selectstart",function(){return!1})},m.prototype.menuSetOption=function(e){var i=e.children("a"),n=i.data("url"),t=i.children("i:first").data("icon")||"&#xe621;",a=i.data("title"),s={href:n,icon:t,cls:i.children("i:first").get(0).className,title:a};this.menuOpen(s)},m.prototype.menuOpen=function(e){o.tabAdd(e,this.options.fresh)},m.prototype.openOldMenu=function(){t.on("tab(tabmenu)",function(){var e=i(this).attr("lay-id");i(".menu-list").slideUp(),i(".tab-move-btn").removeClass("open").find("i").html("&#xe604;");var n={layId:e};s||o.storage(n,"change"),i(this).attr("fresh")&&(i(this).removeAttr("fresh"),o.fresh(e))});var e=window.sessionStorage,n=navigator.userAgent;if(e.menu){var a=e.menu;for(index in a=a.split("|"))if("remove"!=index){if("string"==typeof a[index])var l=JSON.parse(a[index]);l.nodo=!0,n.indexOf("Firefox")>=0&&(l.old=!0),this.menuOpen(l)}}e.curMenu&&"undefined"!==e.curMenu&&("string"==typeof(l=e.curMenu)&&(l=JSON.parse(l)),n.indexOf("Firefox")>=0&&(l.old=!0),this.menuOpen(l));s=!1},m.prototype.menulist=function(){if(e=window.sessionStorage.menu){var e=e.split("|"),t=[],a={};for(index in e)if("remove"!=index){if("string"==typeof e[index])var s=JSON.parse(e[index]);t.push(s)}if(a.list=t,""!=a||null!=a){var l=i("#menu-list-tpl").html();n(l).render(a,function(e){i("#menu-list").html(e)})}}},m.prototype.menuShowType=function(e){var n=document.documentElement.clientWidth,t=0;("close"==e&&(t=1),"open"!=e&&"close"!=e&&window.localStorage)&&(t=window.localStorage.getItem("showType"),t=i("body").hasClass("left-off")?0:1);var s=i(".menu-type").find("i");switch(parseInt(t)){case 1:var l=i("#submenu").find("ul li");l.children("a").each(function(){i(this).addClass("nav-collapse")}),i("body").addClass("left-off").removeClass("left-miss"),l.find("a").on("mouseenter",function(){a.tips(i(this).data("title"),i(this))}).on("mouseleave",function(){a.closeAll("tips")}),this.options.showIcon||i("#submenu").find("i").removeClass("hide-icon"),s.html("&#xe683;");break;default:i("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),i("body").removeClass("left-off"),n<750?(i("body").removeClass("left-miss"),s.html("&#xe61a;")):s.html("&#xe61a;")}},window.onresize=d,d(),i(".minWidth li.first").click(function(e){i(".minWidth #menu .head-nav-item").removeClass("layui-this"),i("#menu li.first dl").removeClass("layui-show"),i(this).siblings(".first").find("dl").hide(),i(this).find("span").toggleClass("layui-nav-mored"),i(this).find("dl").toggle()}),i(".jqadmin-auxiliary-btn").click(function(e){if(i(this).toggleClass("xz"),!l){var n=i(".minWidth .layui-header .header-right .right-menu li").clone(!0);i(".minWidth .layui-header .header-right .right-menu").hide(),n.appendTo("#menu")}i(".minWidth .jqadmin-main-menu").slideToggle(),l=!0}),i(".minWidth .first dd").click(function(e){i(".minWidth .jqadmin-main-menu").slideUp()}),i(".minWidth .head-nav-item").click(function(e){i(".minWidth .jqadmin-main-menu").slideUp(),top.global.menu.menuShowType("open")}),i(".minWidth .tab-menu").unbind("click").click(function(e){i(".minWidth .jqadmin-main-menu").slideUp()}),e("jqmenu",m)});