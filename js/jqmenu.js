layui.define(["jquery","laytpl","layer","jqelem","tabmenu"],function(i){var d=layui.jquery,s=layui.laytpl,l=layui.jqelem,a=layui.layer,o=!0,m=!1,u=layui.tabmenu(),e=function(){this.options={showIcon:!0}};e.prototype.init=function(){l.init();var i=this,e=d("iframe[data-id=0]");i.resize(),i.menuBind(),i.openOldMenu(),0<e.length&&e.attr("src",d("[lay-id=0]").find("em").data("href")),d(".layui-tab-content").prepend('<div class="coverBox"></div>')},e.prototype.tabmenu=u,window.jqTabmenu=u,e.prototype.resize=function(){d(window).on("resize",function(){var i,e,n,a,t,s,l;i=d(".menu-type").find("i").removeClass("iconfont").addClass("layui-icon"),e=d("body"),n=d("#submenu"),a=document.documentElement,t=e.hasClass("pre-set"),s=n.find("ul li"),(l=a.clientWidth)<=750?(d(".jqadmin-main-menu").hide(),e.addClass("left-miss left-off minWidth"),d(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),d(".layui-header .header-right .right-menu").hide(),i.html("&#xe66b;")):(l<970?(d(".layui-nav-itemed").removeClass("layui-nav-itemed"),d(".jqadmin-main-menu").show(),d(".jqadmin-main-menu .layui-nav .layui-nav-item a span").hide(),d(".layui-header .header-right .right-menu").show(),e.removeClass("left-miss minWidth").addClass("left-off"),s.children("a").addClass("nav-collapse"),i.html("&#xe66b;")):(d(".jqadmin-main-menu").show(),d(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),d(".layui-header .header-right .right-menu").show(),t?(e.removeClass("minWidth left-miss"),i.html("&#xe66b;")):l<1280?(e.addClass("left-off").removeClass("minWidth left-miss"),i.html("&#xe66b;")):(e.removeClass("left-off minWidth left-miss"),i.html("&#xe668;")),s.find("a").removeClass("nav-collapse")),d(".jqadmin-main-menu .cloneDom").remove(),m=!1),u.init(),u.tabMove(0,1)}).resize()},e.prototype.menuBind=function(){var o=this,i=d("#menu"),e=d("#submenu").find("ul li"),n=d("body");i.find("a").on("mouseenter",function(){!n.hasClass("minWidth")&&d(window).width()<970&&a.tips(d(this).data("title"),d(this),{tips:3})}).on("mouseleave",function(){a.closeAll("tips")}),e.on("mouseenter",function(){n.hasClass("left-off")&&(0<d(this).find("dl").length?(d(this).addClass("layui-nav-itemed"),a.closeAll("tips")):a.tips(d(this).children("a").data("title"),d(this)))}).on("mouseleave",function(){n.hasClass("left-off")&&(a.closeAll("tips"),d(this).removeClass("layui-nav-itemed"))}),d(".layui-tab-content").on("click",".coverBox",function(){var i=d(".menu-type").find("i");d(this).hide(),d(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),d(".menu-list").slideUp("fast"),d(".jqadmin-auxiliary-btn").removeClass("xz"),d("body.minWidth .jqadmin-main-menu").slideUp(),d(".left-off .layui-nav-itemed").removeClass("layui-nav-itemed"),d("body.minWidth").addClass("left-miss left-off"),i.html("&#xe66b;")}),d(".sub-menu .layui-nav-item,.tab-menu,.menu-list li").bind("click",function(){var i=d(this);i.siblings("li").removeClass("layui-nav-itemed"),a.closeAll("tips"),d(".menu-list").slideUp(),d(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),i.find("dl").length<=0?o.menuSetOption(i):i.hasClass("layui-nav-itemed")&&i.find("a").removeClass("nav-collapse")}).find("dd").bind("click",function(){o.menuSetOption(d(this))}),n.on("click",".all-menus a",function(){return a.closeAll(),o.menuSetOption(d(this)),!1}),l.on("nav(main-menu)",function(i){d(".left-off .jqamdin-left-bar .layui-nav-itemed").removeClass("layui-nav-itemed");var e=i.index(),n=d("#submenu .sub-menu");if(i[0].id){var a=n.eq(e),t=window.sessionStorage||{},s=a.find("dd.layui-this"),l=a.find("em.layui-nav-more:first");if(t.menuId=a.find("[data-formmenu]").data("formenu"),d("body").hasClass("left-off")||(0<s.length?s.closest("li").addClass("layui-nav-itemed"):0<l.length&&l.closest("li").addClass("layui-nav-itemed")),a.is(":visible"))return!1;n.hide(),a.show()}else i.hasClass("fav-menu")&&o.menuSetOption(i)}),d(".tab-move-btn").bind("click",function(){var i=d(".menu-list").css("display");d(".jqadmin-auxiliary-btn").removeClass("xz"),d(".minWidth .jqadmin-main-menu").slideUp(),d("body").hasClass("minWidth")&&d("body").addClass("left-miss left-off"),"none"==i?(d(this).addClass("open"),d(".coverBox").show(),o.menulist(),d(".menu-list li").bind("click",function(){o.menuSetOption(d(this))}),d(".menu-list").slideDown("fast"),d(this).find("i").html("&#xe603;")):(d(this).removeClass("open"),d(".coverBox").hide(),d(".menu-list").slideUp("fast"),d(this).find("i").html("&#xe604;"))})},e.prototype.menuSetOption=function(i){var e=i.is("a")?i:i.children("a"),n=e.data("url"),a=e.children("i:first").data("icon")||"&#xe621;",t=e.data("title"),s=e.data("target")||e.attr("target"),l={href:n,icon:a,cls:e.children("i:first").get(0).className,title:t};return s?(window.location.href=n,!0):(this.menuOpen(l),!1)},e.prototype.menuOpen=function(i,e){u.tabAdd(i,this.options.fresh,e)},e.prototype.openOldMenu=function(){var a=window.sessionStorage||{},i=0,t=this;if(l.on("tab(tabmenu)",function(i){var e=d(this).attr("lay-id");d(".menu-list").slideUp(),d(".tab-move-btn").removeClass("open").find("i").html("&#xe604;");var n={layId:e};!o&&e&&u.storage(n,"change"),i&&i.this&&(a.cTabIdx=d(i.this).attr("lay-id"),a.cTabIdx&&t.sw(d(i.this)))}),a.menu){var e,n=a.menu;for(index in n=n.split("<-!->"))"remove"!=index&&("string"==typeof n[index]&&(e=JSON.parse(n[index])),e&&(e.nodo=!0,a.cTabIdx==e.layId?(this.menuOpen(e,!0),i++):this.menuOpen(e,!1)))}0===i&&this.sw(!1),o=!1},e.prototype.sw=function(i){var e,n=window.sessionStorage||{},a=null;if(i){var t=i.find("em").data("href");if(t){var s=d("#submenu").find('a[data-url="'+t+'"]');if(0<s.length){d("body").hasClass("left-off")&&s.closest(".sub-menu").find(".layui-nav-itemed").removeClass("layui-nav-itemed");var l=s.closest("ul.layui-nav");l.find(".layui-this").removeClass("layui-this"),s.parent().addClass("layui-this"),e=l.data("formenu")}}}else e=n.menuId;e?a=d("#"+e):n.menuId&&(a=d("#"+n.menuId)),a&&0<a.length?a.click():d("#menu li:first").click()},e.prototype.menulist=function(){if(i=(window.sessionStorage||{}).menu){var i=i.split("<-!->"),e=[],n={};for(index in i)if("remove"!=index){if("string"==typeof i[index])var a=JSON.parse(i[index]);e.push(a)}if(n.list=e,""!=n||null!=n){var t=d("#menu-list-tpl").html();s(t).render(n,function(i){d("#menu-list").html(i)})}}},e.prototype.menuShowType=function(i){var e=document.documentElement.clientWidth,n=d("body"),a=d(".menu-type").find("i"),t=d("#submenu").find("ul li");switch("close"==i?1:"open"==i?0:n.hasClass("left-off")?(n.hasClass("minWidth")&&(d(".coverBox").show(),d(".menu-list").css("display","none")),0):1){case 1:d("#submenu .layui-nav-item").removeClass("layui-nav-itemed"),t.children("a").each(function(){d(this).addClass("nav-collapse")}),n.addClass("left-off").removeClass("left-miss"),this.options.showIcon||d("#submenu").find("i").removeClass("hide-icon"),a.html("&#xe66b;");break;default:var s=d("#submenu .sub-menu:visible"),l=s.find("dd.layui-this"),o=s.find("em.layui-nav-more:first");t.find("a").removeClass("nav-collapse"),n.removeClass("left-off"),0<l.length?l.closest("li").addClass("layui-nav-itemed"):0<o.length&&o.closest("li").addClass("layui-nav-itemed"),e<=750&&n.removeClass("left-miss"),a.html("&#xe668;")}},d("body").on("click",".minWidth li.first",function(){d(".minWidth #menu .head-nav-item").removeClass("layui-this"),d("#menu li.first dl").removeClass("layui-show"),d(this).siblings(".first").find("dl").hide(),d(this).find("span").toggleClass("layui-nav-mored"),d(this).find("dl").toggle()}).on("click",".jqadmin-auxiliary-btn",function(){if(d(this).toggleClass("xz"),d(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),d(".menu-list").slideUp("fast"),d(this).hasClass("xz")?d(".coverBox").show():(d("body").hasClass("left-miss")||d("body").hasClass("left-off"))&&d(".coverBox").hide(),!m){var i=d(".minWidth .layui-header .header-right .right-menu li").clone(!0);d(".minWidth .layui-header .header-right .right-menu").hide(),i.appendTo("#menu")}d(".minWidth .jqadmin-main-menu").slideToggle(),m=!0}).on("click",".minWidth .first dd",function(){d(".minWidth .jqadmin-main-menu").slideUp()}).on("click",".minWidth .head-nav-item",function(){d(".minWidth .jqadmin-main-menu").slideUp(),top.global.menu.menuShowType("open")}).on("click",".minWidth .tab-menu",function(){d(".minWidth .jqadmin-main-menu").slideUp()}),i("jqmenu",e)});