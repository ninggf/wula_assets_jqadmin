layui.define(["jquery","laytpl","layer","jqelem","tabmenu"],function(i){var e=layui.jquery,n=layui.laytpl,t=layui.jqelem,a=layui.layer,s=!0,l=!1,o=layui.tabmenu(),d=function(){this.options={showIcon:!0}};function m(){var i=e(".menu-type").find("i"),n=document.documentElement.clientWidth;n<750?(e(".jqadmin-main-menu").hide(),e("body").addClass("left-miss left-off minWidth"),e(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),e("#submenu").find("ul li").find("a").off("mouseenter"),e(".layui-header .header-right .right-menu").hide()):n<970?(e(".jqadmin-main-menu").show(),e(".jqadmin-main-menu .layui-nav .layui-nav-item a span").hide(),e(".layui-header .header-right .right-menu").show(),e("body").removeClass("left-miss minWidth"),e("body").addClass("left-off"),e("#submenu").find("ul li").children("a").each(function(){e(this).addClass("nav-collapse")}),e("#submenu").find("ul li").find("a").on("mouseenter",function(){a.tips(e(this).data("title"),e(this))}),e("#submenu").find("ul li").find("a").on("mouseleave",function(){a.closeAll("tips")}),i.html("&#xe683;"),e(".jqadmin-main-menu .cloneDom").remove(),l=!1):(e(".jqadmin-main-menu").show(),e(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),e(".layui-header .header-right .right-menu").show(),e("body").removeClass("left-off minWidth left-miss"),e("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),i.html("&#xe61a;"),e(".jqadmin-main-menu .cloneDom").remove(),l=!1)}d.prototype.init=function(){var i=this;i.resize(),i.menuBind(),i.openOldMenu(),t.init(),e("iframe[data-id=0]").length>0&&e("iframe[data-id=0]").attr("src",e("[lay-id=0]").find("em").data("href"))},d.prototype.tabmenu=o,window.jqTabmenu=o,d.prototype.resize=function(){e(window).on("resize",function(){o.init(),o.tabMove(0,1)}).resize()},d.prototype.menuBind=function(){var i=this;e("#menu").find("a").on("mouseenter",function(){a.tips(e(this).data("title"),e(this),{tips:3})}).on("mouseleave",function(){a.closeAll("tips")}),e(".sub-menu .layui-nav-item,.tab-menu,.menu-list li").bind("click",function(){var n=e(this);e(".menu-list").slideUp(),e(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),n.find("dl").length<=0&&i.menuSetOption(n)}).find("dd").bind("click",function(){i.menuSetOption(e(this))}),t.on("nav(main-menu)",function(i){var n=i.index();if(-1==i[0].className.indexOf("tab-menu")){var t=e("#submenu .sub-menu").eq(n);(window.sessionStorage||{}).menuId=t.find("ul").data("formenu"),t.is(":visible")||(e("#submenu .sub-menu").hide(),t.show())}}),e(".tab-move-btn").bind("click",function(){"none"==e(".menu-list").css("display")?(e(this).addClass("open"),i.menulist(),e(".menu-list li").bind("click",function(){i.menuSetOption(e(this))}),e(".menu-list").slideDown("fast"),e(this).find("i").html("&#xe603;")):(e(this).removeClass("open"),e(".menu-list").slideUp("fast"),e(this).find("i").html("&#xe604;"))}),e("span.move-left-btn,span.move-right-btn").bind("selectstart",function(){return!1})},d.prototype.menuSetOption=function(i){var e=i.children("a"),n=e.data("url"),t=e.children("i:first").data("icon")||"&#xe621;",a=e.data("title"),s={href:n,icon:t,cls:e.children("i:first").get(0).className,title:a};this.menuOpen(s)},d.prototype.menuOpen=function(i,e){o.tabAdd(i,this.options.fresh,e)},d.prototype.openOldMenu=function(){var i=window.sessionStorage||{},n=0,a=this;if(t.on("tab(tabmenu)",function(n){var t=e(this).attr("lay-id");e(".menu-list").slideUp(),e(".tab-move-btn").removeClass("open").find("i").html("&#xe604;");var l={layId:t};!s&&t&&o.storage(l,"change"),n&&n.this&&(i.cTabIdx=e(n.this).attr("lay-id"),i.cTabIdx&&a.sw(e(n.this)))}),i.menu){var l,d=i.menu;for(index in d=d.split("<-!->"))"remove"!=index&&("string"==typeof d[index]&&(l=JSON.parse(d[index])),l&&(l.nodo=!0,i.cTabIdx==l.layId?(this.menuOpen(l,!0),n++):this.menuOpen(l,!1)))}0===n&&this.sw(!1),s=!1},d.prototype.sw=function(i){var n,t=window.sessionStorage||{};if(i){var a=i.find("em").data("href");if(a){var s=e("#submenu").find('a[data-url="'+a+'"]');if(s.length>0){var l=s.closest("ul.layui-nav");l.find(".layui-this").removeClass("layui-this");var o=s.parent();o.addClass("layui-this"),o.is("dd")&&o.closest("li").addClass("layui-nav-itemed"),n=l.data("formenu")}}}else n=t.menuId;n?e("#"+n).click():t.menuId?e("#"+t.menuId).click():e("#menu li:first").click()},d.prototype.menulist=function(){if(i=(window.sessionStorage||{}).menu){var i=i.split("<-!->"),t=[],a={};for(index in i)if("remove"!=index){if("string"==typeof i[index])var s=JSON.parse(i[index]);t.push(s)}if(a.list=t,""!=a||null!=a){var l=e("#menu-list-tpl").html();n(l).render(a,function(i){e("#menu-list").html(i)})}}},d.prototype.menuShowType=function(i){var n=document.documentElement.clientWidth,t=0;("close"==i&&(t=1),"open"!=i&&"close"!=i&&window.localStorage)&&(t=window.localStorage.getItem("showType"),t=e("body").hasClass("left-off")?0:1);var s=e(".menu-type").find("i");switch(parseInt(t)){case 1:var l=e("#submenu").find("ul li");l.children("a").each(function(){e(this).addClass("nav-collapse")}),e("body").addClass("left-off").removeClass("left-miss"),l.find("a").on("mouseenter",function(){a.tips(e(this).data("title"),e(this))}).on("mouseleave",function(){a.closeAll("tips")}),this.options.showIcon||e("#submenu").find("i").removeClass("hide-icon"),s.html("&#xe683;");break;default:e("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),e("body").removeClass("left-off"),n<750?(e("body").removeClass("left-miss"),s.html("&#xe61a;")):s.html("&#xe61a;")}},window.onresize=m,m(),e(".minWidth li.first").click(function(i){e(".minWidth #menu .head-nav-item").removeClass("layui-this"),e("#menu li.first dl").removeClass("layui-show"),e(this).siblings(".first").find("dl").hide(),e(this).find("span").toggleClass("layui-nav-mored"),e(this).find("dl").toggle()}),e(".jqadmin-auxiliary-btn").click(function(i){if(e(this).toggleClass("xz"),!l){var n=e(".minWidth .layui-header .header-right .right-menu li").clone(!0);e(".minWidth .layui-header .header-right .right-menu").hide(),n.appendTo("#menu")}e(".minWidth .jqadmin-main-menu").slideToggle(),l=!0}),e(".minWidth .first dd").click(function(i){e(".minWidth .jqadmin-main-menu").slideUp()}),e(".minWidth .head-nav-item").click(function(i){e(".minWidth .jqadmin-main-menu").slideUp(),top.global.menu.menuShowType("open")}),e(".minWidth .tab-menu").unbind("click").click(function(i){e(".minWidth .jqadmin-main-menu").slideUp()}),i("jqmenu",d)});