layui.define(["jquery","laytpl","layer","jqelem","tabmenu"],function(i){var o=layui.jquery,s=layui.laytpl,l=layui.jqelem,d=layui.layer,m=!0,n=!1,u=layui.tabmenu(),e=function(){this.options={showIcon:!0}};function t(){var i=o(".menu-type").find("i"),e=document.documentElement.clientWidth;e<750?(o(".jqadmin-main-menu").hide(),o("body").addClass("left-miss left-off minWidth"),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),o("#submenu").find("ul li").find("a").off("mouseenter"),o(".layui-header .header-right .right-menu").hide()):(e<970?(o(".jqadmin-main-menu").show(),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").hide(),o(".layui-header .header-right .right-menu").show(),o("body").removeClass("left-miss minWidth"),o("body").addClass("left-off"),o("#submenu").find("ul li").children("a").each(function(){o(this).addClass("nav-collapse")}),o("#submenu").find("ul li").find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this))}),o("#submenu").find("ul li").find("a").on("mouseleave",function(){d.closeAll("tips")}),i.html("&#xe683;")):(o(".jqadmin-main-menu").show(),o(".jqadmin-main-menu .layui-nav .layui-nav-item a span").show(),o(".layui-header .header-right .right-menu").show(),o("body").removeClass("left-off minWidth left-miss"),o("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),i.html("&#xe61a;")),o(".jqadmin-main-menu .cloneDom").remove(),n=!1)}e.prototype.init=function(){var i=this;i.resize(),i.menuBind(),i.openOldMenu(),l.init(),0<o("iframe[data-id=0]").length&&o("iframe[data-id=0]").attr("src",o("[lay-id=0]").find("em").data("href"))},e.prototype.tabmenu=u,window.jqTabmenu=u,e.prototype.resize=function(){o(window).on("resize",function(){u.init(),u.tabMove(0,1)}).resize()},e.prototype.menuBind=function(){var e=this;o("#menu").find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this),{tips:3})}).on("mouseleave",function(){d.closeAll("tips")}),o(".sub-menu .layui-nav-item,.tab-menu,.menu-list li").bind("click",function(){var i=o(this);o(".menu-list").slideUp(),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;"),i.find("dl").length<=0&&e.menuSetOption(i)}).find("dd").bind("click",function(){e.menuSetOption(o(this))}),l.on("nav(main-menu)",function(i){var e=i.index();if(-1==i[0].className.indexOf("tab-menu")){var n=o("#submenu .sub-menu").eq(e);(window.sessionStorage||{}).menuId=n.find("ul").data("formenu"),n.is(":visible")||(o("#submenu .sub-menu").hide(),n.show())}}),o(".tab-move-btn").bind("click",function(){"none"==o(".menu-list").css("display")?(o(this).addClass("open"),e.menulist(),o(".menu-list li").bind("click",function(){e.menuSetOption(o(this))}),o(".menu-list").slideDown("fast"),o(this).find("i").html("&#xe603;")):(o(this).removeClass("open"),o(".menu-list").slideUp("fast"),o(this).find("i").html("&#xe604;"))}),o("span.move-left-btn,span.move-right-btn").bind("selectstart",function(){return!1})},e.prototype.menuSetOption=function(i){var e=i.children("a"),n=e.data("url"),t=e.children("i:first").data("icon")||"&#xe621;",a=e.data("title"),s={href:n,icon:t,cls:e.children("i:first").get(0).className,title:a};this.menuOpen(s)},e.prototype.menuOpen=function(i,e){u.tabAdd(i,this.options.fresh,e)},e.prototype.openOldMenu=function(){var t=window.sessionStorage||{},i=0,a=this;if(l.on("tab(tabmenu)",function(i){var e=o(this).attr("lay-id");o(".menu-list").slideUp(),o(".tab-move-btn").removeClass("open").find("i").html("&#xe604;");var n={layId:e};!m&&e&&u.storage(n,"change"),i&&i.this&&(t.cTabIdx=o(i.this).attr("lay-id"),t.cTabIdx&&a.sw(o(i.this)))}),t.menu){var e,n=t.menu;for(index in n=n.split("<-!->"))"remove"!=index&&("string"==typeof n[index]&&(e=JSON.parse(n[index])),e&&(e.nodo=!0,t.cTabIdx==e.layId?(this.menuOpen(e,!0),i++):this.menuOpen(e,!1)))}0===i&&this.sw(!1),m=!1},e.prototype.sw=function(i){var e,n=window.sessionStorage||{};if(i){var t=i.find("em").data("href");if(t){var a=o("#submenu").find('a[data-url="'+t+'"]');if(0<a.length){var s=a.closest("ul.layui-nav");s.find(".layui-this").removeClass("layui-this");var l=a.parent();l.addClass("layui-this"),l.is("dd")&&l.closest("li").addClass("layui-nav-itemed"),e=s.data("formenu")}}}else e=n.menuId;e?o("#"+e).click():n.menuId?o("#"+n.menuId).click():o("#menu li:first").click()},e.prototype.menulist=function(){if(i=(window.sessionStorage||{}).menu){var i=i.split("<-!->"),e=[],n={};for(index in i)if("remove"!=index){if("string"==typeof i[index])var t=JSON.parse(i[index]);e.push(t)}if(n.list=e,""!=n||null!=n){var a=o("#menu-list-tpl").html();s(a).render(n,function(i){o("#menu-list").html(i)})}}},e.prototype.menuShowType=function(i){var e=document.documentElement.clientWidth,n=0;("close"==i&&(n=1),"open"!=i&&"close"!=i&&window.localStorage)&&(n=window.localStorage.getItem("showType"),n=o("body").hasClass("left-off")?0:1);var t=o(".menu-type").find("i");switch(parseInt(n)){case 1:var a=o("#submenu").find("ul li");a.children("a").each(function(){o(this).addClass("nav-collapse")}),o("body").addClass("left-off").removeClass("left-miss"),a.find("a").on("mouseenter",function(){d.tips(o(this).data("title"),o(this))}).on("mouseleave",function(){d.closeAll("tips")}),this.options.showIcon||o("#submenu").find("i").removeClass("hide-icon"),t.html("&#xe683;");break;default:o("#submenu").find("ul li").find("a").off("mouseenter").removeClass("nav-collapse"),o("body").removeClass("left-off"),e<750&&o("body").removeClass("left-miss"),t.html("&#xe61a;")}},(window.onresize=t)(),o(".minWidth li.first").click(function(i){o(".minWidth #menu .head-nav-item").removeClass("layui-this"),o("#menu li.first dl").removeClass("layui-show"),o(this).siblings(".first").find("dl").hide(),o(this).find("span").toggleClass("layui-nav-mored"),o(this).find("dl").toggle()}),o(".jqadmin-auxiliary-btn").click(function(i){if(o(this).toggleClass("xz"),!n){var e=o(".minWidth .layui-header .header-right .right-menu li").clone(!0);o(".minWidth .layui-header .header-right .right-menu").hide(),e.appendTo("#menu")}o(".minWidth .jqadmin-main-menu").slideToggle(),n=!0}),o(".minWidth .first dd").click(function(i){o(".minWidth .jqadmin-main-menu").slideUp()}),o(".minWidth .head-nav-item").click(function(i){o(".minWidth .jqadmin-main-menu").slideUp(),top.global.menu.menuShowType("open")}),o(".minWidth .tab-menu").unbind("click").click(function(i){o(".minWidth .jqadmin-main-menu").slideUp()}),i("jqmenu",e)});