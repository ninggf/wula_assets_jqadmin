layui.define("form",function(e){var t="multiSelect",i=layui.jquery,a=layui.form,n=[],l=function(){};l.prototype.init=function(){var e=this;i("select[multiple]").each(function(t,a){var l=i(this),c=[];l.find("option:selected").each(function(){c.push(i(this).val())}),l.next().addClass("multi").find(".layui-select-title").click(function(){n[t]&&i(this).find("input").val(n[t].join(","))}).next().find("dd").each(function(){var a=i(this),n=a.hasClass("layui-this")||i.inArray(a.attr("lay-value"),c)>-1?"checked":"",r=a.text(),o=""===a.attr("lay-value")?"disabled":"";a.html('<input type="checkbox" lay-skin="primary" title="'+r+'" '+n+" "+o+">"),e.selected(t,l,a)}).click(function(a){var n=i(this);if("dd"==a.target.localName&&""!==n.attr("lay-value")){var c=n.find(".layui-form-checkbox").toggleClass("layui-form-checked").hasClass("layui-form-checked");n.find("input").prop("checked",c)}n.parents(".layui-form-select").addClass("layui-form-selected"),e.selected(t,l,n)})}),a.render("checkbox")},l.prototype.selected=function(e,t,a){n[e]=[],t.find("option").prop("selected",!1),a.parents("dl").find("[type=checkbox]:checked").each(function(){var a=i(this).parent().attr("lay-value");t.find("option[value="+a+"]").prop("selected",!0),n[e].push(i(this).attr("title"))}),a.parents("dl").prev().find("input").val(n[e].join(","))},l.prototype.render=function(e,t){a.render(e,t),this.init()};var c=new l;c.init(),e(t,c)});